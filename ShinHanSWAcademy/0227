0227
스프링부트

스프링 레거시 : 배포 시 톰캣 등 별도 Was가 필요하다. (WAR 배포)
스프링 부트 : 배포 시 톰캣을 내장하고 있다. (JAR 배포)

인텔리제이 Gradle 빌드 도구 - build - bootJar 선택, 실행 시 해당 프로젝트의 jar 파일이 생성된다.

터미널에서 java -jar 생성된 jar파일-SNAPSHOT.jar 입력 시 터미널에서 jar 파일 프로젝트 실행

스프링 데이터 JPA 정렬, 페이징 처리

[Pageable]

페이징 처리
Pageable 인터페이스 -> 구현체 : PageRequest 객체 (Static 클래스)

Pageable pageable = PageRequest.of(0, 10);
Page<Member> members = memberRepository.findAll(pageable)

0 : 페이지 번호 (0부터 시작) (page)
10 : 한 페이지에 몇 개씩 데이터를 보여줄 것인지 (size)


Sort sort = Sort.by("member_id").descending(); // id를 기준으로 내림차순
Pageable pageable = PageRequest.of(0, 10, sort);
Page<Member> members = memberRepository.findAll(pageable)

sort : 정렬 기준


[Query Methods]

interface MemberRepository extends JpaRepository< Member , Long > 에서 사용

List<Member> findByIdBetweenOrderByIdDesc(Long from, Long to);

=>
사용 : 
List<Member> members = memberRepository. findByIdBetweenOrderByIdDesc(70L, 75L);

SELECT m.ID
FROM member m
WHERE m.id between ? AND ?
ORDER BY m.ID desc;

MEMBER(ID = 75)
MEMBER(ID = 74)
MEMBER(ID = 73)
MEMBER(ID = 72)
MEMBER(ID = 71)
MEMBER(ID = 70)


정렬 조건은 쿼리메서드로 작성도 가능하지만 Pageable의 세 번째 파라미터 Sort 객체를 이용해서도 작성이 가능하다.


Pageable pageable = RageRequest.of(0, 10, Sort.by("member_id").descending());

Page<Member> members = memberRepository.findByIdBetween(70L, 75L, pageable);



[@Query]

JPQL : 객체를 대상으로 하는 쿼리

@Query("select m from Member m order by m.ID desc")
List<Member> getListDesc();

// 단일 값 파라미터로 바인딩 시 : " = : 단일값"
@Query("update Member m set m.name = : param2 where m.ID = : param1)
int updateMemberName(@Param("ID) Long id, @Param("name") String name);

// 객체를 파라미터로 바인딩 시 : " = :# 객체"
@Query("update Member m set m.name = :#{param.name} where m.id = :#{#param.id} ")
Int updateMemberName(@Param("param") Member member);

